<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
 <title>Keypad</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>
<style type="text/css"> 
   th{cursor:pointer;padding-left:0!important;padding-right:0!important}
   th:active,.active{background-color:#343a40;color:#fff;}
   #tbl-mey th {padding:0.25rem; }
   div.um table th {padding:0.75rem;}
   div.m table td{width:20px !important;}
 </style>
</head>
<body>
<div class="container-lg">
 <div class="row">
  <div class="col-12 col-md-10 py-5">
    
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">பெயர்</span>
      </div>
      <input type="text" class="form-control" id="ta-name" autofocus="true" />
      <div class="input-group-append">
        <button class="btn btn-outline-secondary lang-ta" type="button" data-target="ta-name">ஃ</button>
      </div>
    </div>
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">நகரம்</span>
      </div>
      <input type="text" class="form-control" id="ta-city" />
      <div class="input-group-append">
        <button class="btn btn-outline-secondary lang-ta" type="button" data-target="ta-city">ஃ</button>
      </div>
    </div>
    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">நாடு</span>
      </div>
      <input type="text" class="form-control" id="ta-cnty" />
      <div class="input-group-append">
        <button class="btn btn-outline-secondary lang-ta" type="button" data-target="ta-cnty">ஃ</button>
      </div>
    </div>

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text">செய்தி</span>
      </div>
      <textarea class="form-control" id="ta-msg" rows="2" /></textarea>
      <div class="input-group-append">
        <button class="btn btn-outline-secondary lang-ta" type="button" data-target="ta-msg">ஃ</button>
      </div>
    </div>

  </div>
 </div>
</div>
<div class="position-absolute d-none" id="ta-kp">
  <table class="table table-sm mb-0 text-center" id="tbl-uri">
    <thead class="thead-light">
     <tr>
      <th data-um="்" data-u="அ">அ</th>
      <th data-um="ா" data-u="ஆ">ஆ</th>
      <th data-um="ி" data-u="இ">இ</th>
      <th data-um="ீ" data-u="ஈ">ஈ</th>
      <th data-um="ு" data-u="உ">உ</th>
      <th data-um="ூ" data-u="ஊ">ஊ</th>
      <th data-um="ெ" data-u="எ">எ</th>
      <th data-um="ே" data-u="ஏ">ஏ</th>
      <th data-um="ை" data-u="ஐ">ஐ</th>
      <th data-um="ொ" data-u="ஒ">ஒ</th>
      <th data-um="ோ" data-u="ஓ">ஓ</th>
      <th data-um="ௌ" data-u="ஔ">ஔ</th>
     </tr>
    </thead>
    </table>
    <table class="table table-bordered text-center bg-white" id="tbl-mey">
    <tbody>
     <tr>
      <th class="mey">க</th>
      <th class="mey">ங</th>
      <th class="mey">ச</th>
      <th class="mey">ஞ</th>
      <th class="mey">ட</th>
      <th class="mey">ண</th>
      <th class="mey">த</th>
      <th class="mey">ந</th>
      <th class="mey">ப</th>
      <th class="mey">ம</th>
      <th class="mey">ய</th>
      <th class="mey">ர</th>
      <th class="mey">ல</th>
     </tr><tr>
      <th class="mey">வ</th>
      <th class="mey">ழ</th>
      <th class="mey">ள</th>
      <th class="mey">ற</th>
      <th class="mey">ன</th>
      <th class="mey">ஷ</th>
      <th class="mey">ஸ</th>
      <th class="mey">ஜ</th>
      <th class="mey">ஹ</th>
      <th class="mey">க்ஷ</th>
      <th class="gl">ௐ</th>
      <th class="gl">௳</th>
      <th class="gl">ஸ்ரீ</th>
     </tr>
    </tbody>
  </table>
</div>
<script type="text/javascript">
 jQuery(document).ready(function($) {
  jQuery(".lang-ta").on("click",function(e){
    var target=jQuery(this).data("target");
    var tin=jQuery("#" + target).parent();
    var tpos=tin.offset();
    var itop = ( parseFloat(tpos.top) + parseFloat(tin.height()) );
    if(jQuery(this).hasClass('active')){
      jQuery("#ta-kp").addClass("d-none");
      jQuery(".lang-ta.active").removeClass("active");
    }else{
      jQuery(".lang-ta.active").removeClass("active");
      jQuery(this).addClass("active");
      jQuery("#ta-kp").removeClass("d-none");
    }
    

    /*if( jQuery("#" + target).attr("readonly") ){
      jQuery("#" + target).prop('readonly','');
    }else
      jQuery("#" + target).prop("readonly","readonly");*/

    resetTa();
    jQuery("#" + target).focus();
    jQuery("#ta-kp").data("target","#" + target);

    /*if(jQuery("#ta-kp").hasClass("d-none"))*/
      

    jQuery("#ta-kp").offset({top: itop,left: tpos.left}).css("z-index",9999);
    jQuery("#ta-kp").width(tin.width());
  });
  jQuery(".mey").on("click",function(e){
    var els=jQuery(this).text();
    var togl=false;
    var intp=jQuery("#ta-kp").data("target");

    jQuery(intp).focus();

    if(jQuery(this).hasClass("active")){
     jQuery("thead th").each(function(index, el) {
      if(jQuery(this).data("u")){
       jQuery(this).text(jQuery(this).data("u"));
      }
     });
     /*jQuery("thead th:last()").show();*/
     togl=false;
    }else{
     jQuery("thead th").each(function(index, el) {
      if(jQuery(this).data("um")){
       jQuery(this).text(els + jQuery(this).data("um"));
      }
     });
     togl=true;
     /*jQuery("thead th:last()").hide();*/
    }
    const activeEle = document.activeElement;
    /*const selection = activeEle.value.substring(
      activeEle.selectionStart, activeEle.selectionEnd
    );*/
    
    var obj=document.getElementById(intp.replace('#',''));
    obj.setRangeText(jQuery(this).text(),activeEle.selectionStart,activeEle.selectionEnd,"end");

    jQuery("tbody th").removeClass("active");
    if(togl){jQuery(this).addClass("active");}

   });

   jQuery("#tbl-uri th").on("click",function(e){
    var intp=jQuery("#ta-kp").data("target");
    jQuery(intp).focus();
    var obj=document.getElementById(intp.replace('#',''));
    const activeEle = document.activeElement;
    var rt=jQuery(this).data("um");
    if(jQuery(this).data("u")==jQuery(this).text() )
      rt=jQuery(this).text();
    obj.setRangeText(rt,activeEle.selectionStart,activeEle.selectionEnd,"end");
    resetTa();
   });
   jQuery(".gl").on("click",function(e){
    var intp=jQuery("#ta-kp").data("target");
    jQuery(intp).focus();
    var obj=document.getElementById(intp.replace('#',''));
    const activeEle = document.activeElement;
    var rt=jQuery(this).text();
    obj.setRangeText(rt,activeEle.selectionStart,activeEle.selectionEnd,"end");
    resetTa();
   });

   function resetTa(){
    jQuery("thead th").each(function(index, el) {
      if(jQuery(this).data("u")){
       jQuery(this).text(jQuery(this).data("u"));
      }
    });
    jQuery("tbody th").removeClass("active");
   }
 });
</script>
</body>
</html>